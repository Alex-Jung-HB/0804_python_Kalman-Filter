# 칼만 필터 (Kalman Filter)

칼만 필터(Kalman Filter)는 노이즈가 있는 측정값들로부터 동적 시스템의 상태를 추정하는 수학적 알고리즘입니다. 1960년 루돌프 칼만(Rudolf Kalman)이 개발했으며, 현재 다양한 분야에서 핵심적으로 사용되고 있습니다.

## 기본 원리

칼만 필터는 **예측(Prediction)**과 **업데이트(Update)** 두 단계를 반복합니다:

1. **예측 단계**: 이전 상태와 시스템 모델을 사용해 현재 상태를 예측
2. **업데이트 단계**: 새로운 측정값을 받아 예측을 보정

이 과정에서 칼만 필터는 측정값의 불확실성과 모델의 불확실성을 모두 고려하여 최적의 추정값을 제공합니다.

## 핵심 특징

- **재귀적 알고리즘**: 모든 과거 데이터를 저장할 필요 없이 이전 추정값만으로 새로운 추정 수행
- **최적성**: 선형 시스템과 가우시안 노이즈 조건에서 최소 평균 제곱 오차를 보장
- **실시간 처리**: 새로운 측정값이 들어올 때마다 즉시 상태 추정 업데이트

## 주요 응용 분야

### 항공우주
- GPS 내비게이션
- 우주선 궤도 추적
- 자세 제어

### 자동차
- 자율주행차의 위치 추정
- 센서 융합

### 로보틱스
- 로봇의 위치 추정(SLAM)
- 센서 데이터 융합

### 금융
- 주식 가격 예측
- 리스크 관리

### 신호 처리
- 노이즈 제거
- 신호 추적

## 수학적 배경

칼만 필터는 다음과 같은 선형 동적 시스템을 가정합니다:

### 상태 방정식
```
x(k+1) = F·x(k) + B·u(k) + w(k)
```

### 측정 방정식
```
z(k) = H·x(k) + v(k)
```

여기서:
- `x(k)`: k 시점의 상태 벡터
- `F`: 상태 전이 행렬
- `B`: 제어 입력 행렬
- `u(k)`: 제어 입력 벡터
- `H`: 측정 행렬
- `z(k)`: 측정 벡터
- `w(k)`: 프로세스 노이즈 (가우시안, 평균 0)
- `v(k)`: 측정 노이즈 (가우시안, 평균 0)

## 확장 버전들

### 확장 칼만 필터 (Extended Kalman Filter, EKF)
비선형 시스템에 대한 근사해를 제공하는 방법입니다. 비선형 함수를 1차 테일러 급수로 근사화하여 선형화합니다.

### 무향 칼만 필터 (Unscented Kalman Filter, UKF)
비선형성을 더 잘 다루는 개선된 방법으로, 시그마 포인트를 사용하여 확률 분포의 평균과 공분산을 더 정확하게 전파합니다.

### 파티클 필터 (Particle Filter)
비가우시안 분포를 다룰 수 있는 방법으로, 몬테카르로 방법을 기반으로 합니다.

## 알고리즘 단계

### 1. 예측 단계 (Predict)
```
x̂(k|k-1) = F·x̂(k-1|k-1) + B·u(k)
P(k|k-1) = F·P(k-1|k-1)·F^T + Q
```

### 2. 업데이트 단계 (Update)
```
K(k) = P(k|k-1)·H^T·[H·P(k|k-1)·H^T + R]^(-1)
x̂(k|k) = x̂(k|k-1) + K(k)·[z(k) - H·x̂(k|k-1)]
P(k|k) = [I - K(k)·H]·P(k|k-1)
```

여기서:
- `x̂(k|k-1)`: k 시점의 사전 상태 추정
- `x̂(k|k)`: k 시점의 사후 상태 추정
- `P(k|k-1)`: 사전 오차 공분산 행렬
- `P(k|k)`: 사후 오차 공분산 행렬
- `K(k)`: 칼만 게인
- `Q`: 프로세스 노이즈 공분산 행렬
- `R`: 측정 노이즈 공분산 행렬

## 장점과 한계

### 장점
- 계산 효율성이 높음
- 실시간 처리가 가능
- 최적의 추정 성능 (선형 시스템, 가우시안 노이즈 조건)
- 구현이 상대적으로 간단

### 한계
- 선형 시스템과 가우시안 노이즈 가정이 필요
- 시스템 모델이 정확해야 함
- 초기값 설정이 중요
- 비선형 시스템에서는 성능 저하 가능

## 결론

칼만 필터는 현대 제어 이론과 신호 처리의 기초가 되는 중요한 도구로, 특히 불확실한 환경에서 정확한 상태 추정이 필요한 모든 분야에서 광범위하게 활용되고 있습니다. 비선형 시스템이나 비가우시안 노이즈 환경에서는 확장된 버전들을 사용하여 더 나은 성능을 얻을 수 있습니다.
